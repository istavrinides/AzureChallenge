@model AzureChallenge.UI.Areas.Administration.Models.Tournaments.IndexParameterViewModel
@{
    ViewData["Title"] = "Tournament Paremeter list";
}

<h1>@ViewData["Title"]</h1>
<hr />


<form asp-controller="Parameter" asp-action="SaveChanges" method="post">
    @Html.AntiForgeryToken()
    
    <input type="hidden" asp-for="@Model.TournamentId" />
    <div class="container">

        <div class="form-group row">
            <h4>Add new parameter to list</h4>
        </div>
        <div id="saveAlert" class="alert alert-danger d-none" role="alert">You have made changes. Please click save or risk losing them!</div>
        <div id="hiddenDivs">
            @for (int i = 0; i < Model.ParameterList.Count; i++)
            {
                <input type="hidden" class="paramBag paramBagName" asp-for="@Model.ParameterList[i].Name" data-index="@i" />
                <input type="hidden" class='paramBag paramBagVal' asp-for="@Model.ParameterList[i].Value" data-index="@i" />
            }
        </div>
        <div class="form-group row">
            <div class="col-md-6">
                <label>@Html.DisplayNameFor(model => model.ParameterList[0].Name)</label>
                <input class="form-control" id="inputNewName" required data-toggle="popover" data-content="This name is already in the list and won't be added." data-placement="bottom" data-trigger="focus" />
            </div>
            <div class="col-md-6">
                <label>@Html.DisplayNameFor(model => model.ParameterList[0].Value)</label>
                <input class="form-control" id="inputNewValue" required />
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-1 offset-9">
                <button type="button" id="addToList" class="btn btn-info">Add</button>
            </div>
            <div class="col-md-2">
                <button class="btn btn-warning" id="btnSave" disabled>Save changes</button>
            </div>
        </div>
    </div>
        <div class="container">
            <table class="table table-responsive-md table-hover" id="parameterTable">
                <thead class="thead-dark">
                    <tr>
                        <th style="width:25%">
                            @Html.DisplayNameFor(model => model.ParameterList[0].Name)
                        </th>
                        <th style="width:66.67%">
                            @Html.DisplayNameFor(model => model.ParameterList[0].Value)
                        </th>
                        <th style="width:8.33%"></th>
                    </tr>
                </thead>
                <tbody>
                    @for (int i = 0; i < Model.ParameterList.Count; i++)
                    {
                        <tr data-index="@i">
                            <td>
                                @Model.ParameterList[i].Name
                            </td>
                            <td>
                                @Model.ParameterList[i].Value
                            </td>
                            <td>
                                <button type='button' class='btn btn-danger deleteParameter' data-name='@Model.ParameterList[i].Name'>Delete</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
</form>


@section Scripts
{
    <script src="~/js/azurechallenge.parameterlist.js" type="text/javascript"></script>
}
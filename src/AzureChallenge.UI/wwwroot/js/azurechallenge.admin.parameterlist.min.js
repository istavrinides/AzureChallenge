$(document).ready(function(){$(".popover").css("background-color","red");var n={};$("input.paramBagName").each(function(){var t=$(this).val();n[t]=t});$("#addToList").on("click",function(){var e=$("#form"),i,r,t,f,u;if($.validator.unobtrusive.parse(e),e.validate(),$("form").validate().element("#inputNewName"),$("form").validate().element("#inputNewValue"),i=$("#inputNewName").val(),r=$("#inputNewValue").val(),i&&r){if(n[i]){$("#existsModal").modal("show");return}t=0;f=!1;$("input.paramBagName").each(function(){var n=parseInt($(this).attr("data-index"));t<n&&(t=n,f=!0)});f&&(t+=1);u=$("#hiddenDivs");u.append("<input type='hidden' class='paramBag paramBagName' name='ParameterList["+t+"].Name' id='ParameterList_"+t+"__Name' data-index='"+t+"' value='"+i+"' />");u.append("<input type='hidden' class='paramBag paramBagVal' name='ParameterList["+t+"].Value' id='ParameterList_"+t+"__Value' value='"+r+"' data-index='"+t+"' />");u.append("<input type='hidden' class='paramBag paramBagAssigned' name='ParameterList["+t+"].AssignedToQuestion' id='ParameterList_"+t+"__AssignedToQuestion' value='0' data-index='"+t+"' />");$.post("/Administration/Parameter/UpdateParameters",$("form").serialize()).done(function(){$("#updateModal").hide();$("body").removeClass("modal-open");$(".modal-backdrop").remove();var n=$("#parameterTable tbody");n.append("<tr data-index='"+t+"'><td>"+i+"<\/td><td>"+r+"<\/td><td class='text-center'><a href='#' class='tableParamDelete' data-name='"+i+"'><img src='/images/trash-2.svg' class='svg-filter-danger' /><\/a><\/td>")}).fail(function(){window.alert("Could not update the parameter list, an internal error occured. Please try again later.");location.reload()})}});$("#parameterTable").on("click",".tableParamDelete",function(){var t=$(this).parent().parent().attr("data-index"),i=$(this).attr("data-name");$("input.paramBag[data-index='"+t+"'").remove();$("#parameterTable tbody tr[data-index='"+t+"']").remove();delete n[i];$("input.paramBagName").each(function(){var n=parseInt($(this).attr("data-index"));t<n&&($(this).attr("id","ParameterList_"+(n-1)+"__Name"),$(this).attr("name","ParameterList["+(n-1)+"].Name"),$(this).attr("data-index",n-1))});$("input.paramBagVal").each(function(){var n=parseInt($(this).attr("data-index"));t<n&&($(this).attr("id","ParameterList_"+(n-1)+"__Value"),$(this).attr("name","ParameterList["+(n-1)+"].Value"),$(this).attr("data-index",n-1))});$("input.paramBagAssigned").each(function(){var n=parseInt($(this).attr("data-index"));t<n&&($(this).attr("id","ParameterList_"+(n-1)+"__AssignedToQuestion"),$(this).attr("name","ParameterList["+(n-1)+"].AssignedToQuestion"),$(this).attr("data-index",n-1))});$("#parameterTable tbody tr").each(function(){var n=parseInt($(this).attr("data-index"));t<n&&$(this).attr("data-index",n-1)});$.post("/Administration/Parameter/UpdateParameters",$("form").serialize()).done(function(){$("#updateModal").hide();$("body").removeClass("modal-open");$(".modal-backdrop").remove()}).fail(function(){window.alert("Could not update the parameter list, an internal error occured. Please try again later.");location.reload()})})});